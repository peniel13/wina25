{% extends "base.html" %}
{% load static %}

{% block content %}
<body class="bg-gray-100 font-sans">

    <!-- üåÜ Section principale -->
    <div class="min-h-screen flex flex-col justify-center items-center text-center px-6 pb-12"> <!-- pb-12 ajout√© -->
        <!-- Titre -->
        <h1 class="text-4xl md:text-5xl font-extrabold text-gray-800 mb-8">
            üè° Espace Immobilier
        </h1>
        <p class="text-gray-600 text-lg mb-10 max-w-2xl">
            Publiez vos besoins immobiliers et trouvez rapidement un bien adapt√©.  
            Les agences et courtiers peuvent consulter les requ√™tes, saisir de nouvelles opportunit√©s  
            et gagner des commissions sur les march√©s conclus.
        </p>
        
        <!-- üîò Boutons d‚Äôaction -->
        <div class="flex flex-col md:flex-row gap-6 flex-wrap justify-center">
            
            <!-- Bouton Requ√™tes Immobili√®res -->
            <a href="{% url 'requete_list' %}" 
               class="flex items-center justify-center gap-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-8 rounded-2xl shadow-md transition transform hover:scale-105 w-64">
                <i class='bx bx-list-ul text-2xl'></i>
                <span>Requ√™tes Immobili√®res</span>
            </a>

            <!-- Bouton Rechercher un immobilier -->
            <a href="{% url 'requete_create' %}" 
               class="flex items-center justify-center gap-3 bg-green-600 hover:bg-green-700 text-white font-semibold py-4 px-8 rounded-2xl shadow-md transition transform hover:scale-105 w-64">
                <i class='bx bx-search-alt-2 text-2xl'></i>
                <span>Rechercher un immobilier</span>
            </a>

            <!-- Bouton Publier un bien immobilier -->
            <a href="{% url 'immobusiness_create' %}" 
               class="flex items-center justify-center gap-3 bg-purple-600 hover:bg-purple-700 text-white font-semibold py-4 px-8 rounded-2xl shadow-md transition transform hover:scale-105 w-64">
                <i class='bx bx-plus-circle text-2xl'></i>
                <span>Publier un bien immobilier</span>
            </a>

            <!-- Bouton Liste des publications immobili√®res -->
    
            <a href="{% url 'immobusiness_list' %}" 
            class="flex items-center justify-center gap-3 bg-green-600 hover:bg-green-700 text-white font-semibold py-4 px-8 rounded-2xl shadow-md transition transform hover:scale-105 w-64">
             <i class='bx bx-search-alt-2 text-2xl'></i>
             <span>Liste des publications</span>
         </a>
        </div>
    </div>
    {% if ad_popup and ad_popup.is_active %}
    <div id="popupAd" class="modal show d-block" tabindex="-1"
         style="background: rgba(0,0,0,0.5); position: fixed; top: 0; left: 0;
                width: 100%; height: 100%; display: flex; justify-content: center;
                align-items: center; z-index: 9999;">
        <div class="modal-dialog modal-dialog-centered" style="max-width: 90%; width: auto;">
            <div class="modal-content position-relative">
                <button type="button" class="btn-close" onclick="closePopup()"
                        style="border: none; background: none; font-size: 30px;
                               color: #fff; position: absolute; top: 20px; right: 20px;">&times;
                </button>
                <div class="modal-body text-center" style="display: flex; flex-direction: column;
                                                            justify-content: space-between; max-height: 80vh;">
    
                    {% if ad_popup.media_type == "image" %}
                        <img src="{{ ad_popup.file.url }}" class="img-fluid"
                             style="max-height: 70vh; width: auto; margin-bottom: 20px;" alt="Publicit√©">
                    {% else %}
                        <video autoplay controls class="img-fluid"
                               style="max-height: 70vh; width: auto; margin-bottom: 20px;">
                            <source src="{{ ad_popup.file.url }}" type="video/mp4">
                        </video>
                    {% endif %}
    
                    <div class="mt-4 d-flex flex-wrap justify-content-center gap-3">
    
                        {% if ad_popup.url %}
                            <a href="{{ ad_popup.url }}" target="_blank"
                               class="btn btn-danger"
                               style="font-size: 18px; padding: 10px 20px; background-color: #ff5733;
                                      border: none; color: white; border-radius: 5px;
                                      transition: background-color 0.3s ease;">
                                üîó Voir l'annonce
                            </a>
                        {% endif %}
    
                        {% if ad_popup.store %}
                            <a href="{% url 'store_detail' ad_popup.store.slug %}"
                               class="btn btn-primary"
                               style="font-size: 18px; padding: 10px 20px; background-color: #007bff;
                                      border: none; color: white; border-radius: 5px;
                                      transition: background-color 0.3s ease;">
                                üè¨ Visiter le store
                            </a>
                        {% endif %}
    
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
    <script>
        function closePopup() {
            const popup = document.getElementById("popupAd");
        
            // Stopper la vid√©o s'il y en a une
            const video = popup.querySelector("video");
            if (video) {
                video.pause();
                video.currentTime = 0; // optionnel : remet la vid√©o au d√©but
            }
        
            // Cacher le popup
            popup.style.display = "none";
        }
    </script>
</body>
{% endblock %}
