{% extends "base.html" %}
{% block content %}
<div class="container mx-auto mt-8 px-4">
  <h2 class="text-2xl font-bold mb-6">ğŸ’³ Mes Paiements d'Invitations ValidÃ©s</h2>

  {% if payments %}
  <div class="overflow-x-auto">
    <table class="min-w-full table-auto bg-white shadow-lg rounded-lg">
      <thead class="bg-green-600 text-white">
        <tr>
          <th class="px-6 py-3 text-left">Type d'invitation</th>
          <th class="px-6 py-3 text-left">Transaction ID</th>
          <th class="px-6 py-3 text-left">TÃ©lÃ©phone</th>
          <th class="px-6 py-3 text-left">Date</th>
          <th class="px-6 py-3 text-left">Statut</th>
        </tr>
      </thead>
      <tbody>
        {% for payment in payments %}
        <tr class="border-t hover:bg-gray-50">
          <td class="px-6 py-4">{{ payment.invite.get_type_invite_display }}</td>
          <td class="px-6 py-4">{{ payment.transaction_id }}</td>
          <td class="px-6 py-4">{{ payment.numero_telephone }}</td>
          <td class="px-6 py-4">{{ payment.date_paiement|date:"d/m/Y Ã  H:i" }}</td>
          <td class="px-6 py-4">
            {% if payment.est_valide %}
              <span class="text-green-600 font-semibold">ValidÃ©</span>
            {% else %}
              <span class="text-red-500 font-semibold">En attente</span>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {% if payments.has_other_pages %}
  <div class="mt-8">
    <nav class="flex justify-center" aria-label="Pagination des paiements">
      <ul class="flex space-x-4">
        {% if payments.has_previous %}
        <li>
          <a href="?page={{ payments.previous_page_number }}"
             class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
            &lt; PrÃ©cÃ©dent
          </a>
        </li>
        {% endif %}
        <li>
          <span class="px-4 py-2 bg-green-600 text-white rounded-lg">
            Page {{ payments.number }}
          </span>
        </li>
        {% if payments.has_next %}
        <li>
          <a href="?page={{ payments.next_page_number }}"
             class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
            Suivant &gt;
          </a>
        </li>
        {% endif %}
      </ul>
    </nav>
  </div>
  {% endif %}

  {% else %}
  <div class="text-center mt-10">
    <p class="text-gray-600 text-lg">Aucun paiement d'invitation validÃ© pour l'instant.</p>
  </div>
  {% endif %}
</div>
{% endblock %}
