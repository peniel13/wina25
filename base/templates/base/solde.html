{% extends "base.html" %}

{% block content %}
<div class="min-h-screen bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center px-4">
  <div class="bg-white rounded-xl shadow-lg p-8 max-w-md w-full text-center">
    <h1 class="text-3xl font-bold text-gray-800 mb-6">Votre solde WinaMoney</h1>

    <div class="flex items-center justify-center gap-3 mb-4">
      {% if user.profile_pic %}
        <img class="h-16 w-16 rounded-full object-cover border-2 border-purple-600"
             src="{{ user.profile_pic.url }}"
             alt="Profile Picture">
      {% else %}
        <img class="h-16 w-16 rounded-full object-cover border-2 border-gray-400"
             src="https://bootdey.com/img/Content/avatar/avatar7.png"
             alt="Default Profile Picture">
      {% endif %}
      <p class="text-gray-600 text-lg">
        Salut <span class="font-semibold text-indigo-600">{{ user.username }}</span>
      </p>
    </div>

    <div class="text-5xl font-extrabold text-indigo-700 mb-8">
      {{ solde }} <span class="text-2xl font-normal">$</span>
    </div>
    <p class="text-gray-500">Continuez Ã  visiter des stores et liens pour augmenter votre solde !</p>

    <div class="mt-8 flex flex-col gap-4">
      <a href="{% url 'liste_invites' %}" 
         class="inline-block bg-indigo-600 hover:bg-indigo-700 text-white py-3 px-6 rounded-lg transition duration-300">
        Aller gagner
      </a>

      <a href="{% url 'confirmer_mot_de_passe' %}" 
         class="inline-block bg-green-600 hover:bg-green-700 text-white py-3 px-6 rounded-lg transition duration-300">
        Retirer mon argent via Mobile Money ou compte bancaire
      </a>
      <a href="{% url 'withdrawal_history' %}" 
      class="inline-block bg-indigo-600 hover:bg-indigo-700 text-white py-3 px-6 rounded-lg transition duration-300">
     Historique de retrait
   </a>
   <a href="{% url 'confirmer_mot_de_passe2' %}" 
   class="inline-block bg-indigo-600 hover:bg-indigo-700 text-white py-3 px-6 rounded-lg transition duration-300">
  Transfert ton solde Ã  un(e) ami(e) 
</a>
 <!-- ðŸ”¹ Nouveau bouton convertir -->
 <button onclick="document.getElementById('convertModal').classList.remove('hidden')" 
 class="bg-purple-600 hover:bg-purple-700 text-white py-3 px-6 rounded-lg transition duration-300">
Convertir en Points ðŸŽ¯
</button>
</div>
</div>
</div>

<!-- ðŸ”¹ Popup de confirmation -->
<div id="convertModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
<div class="bg-white rounded-lg shadow-lg p-6 w-96">
<h2 class="text-xl font-bold mb-4 text-gray-800">Convertir USD en Points</h2>
<form method="POST" action="{% url 'convert_usd_to_points' %}">
{% csrf_token %}
<label class="block text-gray-700 mb-2">Montant en USD Ã  convertir :</label>
<input type="number" name="usd_amount" step="0.01" min="0.01" required 
class="w-full border rounded px-3 py-2 mb-4 focus:outline-none focus:ring-2 focus:ring-purple-500">

<div class="flex justify-between">
<button type="button" 
   onclick="document.getElementById('convertModal').classList.add('hidden')" 
   class="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500">
Annuler
</button>
<button type="submit" 
   class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">
Confirmer
</button>
</div>
</form>
</div>
</div>
    </div>
  </div>
</div>
{% endblock %}
